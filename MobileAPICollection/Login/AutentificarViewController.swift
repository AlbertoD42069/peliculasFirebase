//
//  AutentificarViewController.swift
//  MobileAPICollection
//
//  Created by Hector Guadalupe Climaco Flores on 31/03/22.
//

import Foundation
import FirebaseAuth
import UIKit

class AutentificarViewController: UINavigationController{
    
    
    let login = LoginViewController()
    
    func crearUsuario(){
        if let email = login.txtEmail.text,
           let contraseña = login.txtContraseña.text {
            Auth.auth().createUser(withEmail: email, password: contraseña) { (result, error) in
                if let results = result,error == nil {
                    self.navigationController?.pushViewController(SesionIniciadaViewController(email: results.user.email!, provider: .basic), animated: true)
                }
                else {
                    let alertaController = UIAlertController(title: "ERROR", message: "NO SE A PODIDO REGISTRAR EL USUARIO", preferredStyle: .alert)
                        alertaController.addAction(UIAlertAction(title: "aceptar", style: .default))
                        self.present(alertaController, animated: true, completion: nil)
                }
            }
        }
        
    }
    func accesoUsuario(){
        if let email = login.txtEmail.text,
           let contraseña = login.txtContraseña.text {
            Auth.auth().signIn(withEmail: email, password: contraseña) { (result, error) in
                if let results = result,error == nil {
                    self.navigationController?.pushViewController(SesionIniciadaViewController(email: results.user.email!, provider: .basic), animated: true)
                }
                else {
                    let alertaController = UIAlertController(title: "ERROR", message: "NO SE A PODIDO REGISTRAR EL USUARIO", preferredStyle: .alert)
                        alertaController.addAction(UIAlertAction(title: "aceptar", style: .default))
                        self.present(alertaController, animated: true, completion: nil)
                }
            }
        }
    }
    }
